<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Place Order</title>
    
    <script>
    window.onload = function () {
        const orderData = JSON.parse(localStorage.getItem("orderData"));
        if (orderData) {
            const cart = orderData.cart || [];
            const quantities = cart.map((product, index) => product.quantity || 1); // Use stored quantity or default to 1
            const customerDetails = orderData.customerDetails;

            let totalPrice = 0;
            const deliveryCharges = customerDetails.deliveryMethod === "15_minutes" ? 4 : 0;

            let cartDetails = "<center><h2>ORDER SUMMARY</h2></center>";
            cart.forEach((product, index) => {
                const quantity = quantities[index];
                const itemTotal = product.price * quantity;
                totalPrice += itemTotal;

                cartDetails += `
                    <hr>
                    <div>
                        <p>Product: ${product.name}</p>
                        <p>Price: ₹${product.price}</p>
                        <p>Quantity: ${quantity}</p>
                        <p>Item Total: ₹${itemTotal}</p>
                    </div>
                    <hr>
                `;
            });

            totalPrice += deliveryCharges;

            document.getElementById("order-summary").innerHTML = `
                ${cartDetails}
                <h3>Delivery Charges: ₹${deliveryCharges}</h3>
                <h2>Total Price: ₹${totalPrice}</h2>
                
               <center> <h3>Customer Details</h3></center>
                <p><strong>Name:</strong> ${customerDetails.name}</p>
                <p><strong>Phone Number:</strong> ${customerDetails.phonenumber}</p>
                <p><strong>Address:</strong> ${customerDetails.address}</p>
                <p><strong>PIN Code:</strong> ${customerDetails.pincode}</p>
                <p><strong>SELBYME Code:</strong> ${customerDetails.selbymeCode || "N/A"}</p>
                
               <center> <h3>Delivery Method</h3></center>
                <p>${customerDetails.deliveryMethod === "15_minutes"
                    ? "Fastest Delivery in 15-Minute: Just ₹4!"
                    : "Free Delivery in 4 Hours!"}</p>
            `;
        } else {
            document.getElementById("order-summary").innerHTML = "<p>No order data found!</p>";
        }
    };

    function redirectToWhatsApp() {
    const orderData = JSON.parse(localStorage.getItem('orderData'));
    if (!orderData) {
        alert("No order data found!");
        return;
    }

    const customerDetails = orderData.customerDetails;
    const cart = orderData.cart || [];
    const quantities = cart.map((product) => product.quantity || 1);

    let message = "Order Details:\n";
    cart.forEach((product, index) => {
        const quantity = quantities[index];
        const productLink = `https://selbyme.netlify.app/${encodeURIComponent(product.name)}/`;
        message += `Product: ${product.name}, Price: ₹${product.price}, Quantity: ${quantity}\nLink: ${productLink}\n\n`;
    });

    const deliveryCharges = customerDetails.deliveryMethod === "15_minutes" ? 4 : 0;
    const totalPrice = cart.reduce((total, product, index) => total + product.price * quantities[index], 0) + deliveryCharges;

    message += `\nTotal Price: ₹${totalPrice}`;
    message += `\nDelivery Charges: ₹${deliveryCharges}`;
    message += `\n\nCustomer Details:\nName: ${customerDetails.name || "N/A"}\nPhone Number: ${customerDetails.phonenumber || "N/A"}\nAddress: ${customerDetails.address || "N/A"}\nPIN Code: ${customerDetails.pincode || "N/A"}\nSELBYME Code: ${customerDetails.selbymeCode || "N/A"}`;
    message += `\n\nDelivery Method: ${
        customerDetails.deliveryMethod === "15_minutes"
            ? "Fastest Delivery in 15-Minute"
            : "Free Delivery in 4 Hours"
    }`;
    message += `\n`;
    message += `\n(NOTE: "Your order will be automatically canceled if any unauthorized changes are made to order details or the total price.")`;

    const encodedMessage = encodeURIComponent(message);
    window.open(`https://wa.me/919352856134?text=${encodedMessage}`, '_blank');

    // Clear the cart and order data
    localStorage.removeItem('orderData');
    localStorage.removeItem('cart');

    alert("Your order has been placed. The cart is now empty.");
    window.location.href = 'index.html';
}

    function sendSMS() {
        const orderData = JSON.parse(localStorage.getItem('orderData'));
    if (!orderData) {
        alert("No order data found!");
        return;
    }

    const customerDetails = orderData.customerDetails;
    const cart = orderData.cart || [];
    const quantities = cart.map((product) => product.quantity || 1);

    let message = "Order Details:\n";
    cart.forEach((product, index) => {
        const quantity = quantities[index];
        const productLink = `https://selbyme.netlify.app/${encodeURIComponent(product.name)}/`;
        message += `Product: ${product.name}, Price: ₹${product.price}, Quantity: ${quantity}\nLink: ${productLink}\n\n`;
    });

    const deliveryCharges = customerDetails.deliveryMethod === "15_minutes" ? 4 : 0;
    const totalPrice = cart.reduce((total, product, index) => total + product.price * quantities[index], 0) + deliveryCharges;

    message += `\nTotal Price: ₹${totalPrice}`;
    message += `\nDelivery Charges: ₹${deliveryCharges}`;
    message += `\n\nCustomer Details:\nName: ${customerDetails.name || "N/A"}\nPhone Number: ${customerDetails.phonenumber || "N/A"}\nAddress: ${customerDetails.address || "N/A"}\nPIN Code: ${customerDetails.pincode || "N/A"}\nSELBYME Code: ${customerDetails.selbymeCode || "N/A"}`;
    message += `\n\nDelivery Method: ${
        customerDetails.deliveryMethod === "15_minutes"
            ? "Fastest Delivery in 15-Minute"
            : "Free Delivery in 4 Hours"
    }`;
    message += `\n`;
    message += `\n(NOTE: "Your order will be automatically canceled if any unauthorized changes are made to order details or the total price.")`;

        const smsLink = `sms:9352856134?body=${encodeURIComponent(message)}`;
        window.location.href = smsLink;

        // Clear the cart and order data
    localStorage.removeItem('orderData');
    localStorage.removeItem('cart');

    alert("Your order has been placed. The cart is now empty.");
    window.location.href = 'index.html';
}
</script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
   <header class="header">
        <!-- Delivery Boy Image -->
        <img src="delivery boy.png" alt="Delivery Boy" class="delivery-boy">
        <div class="logo">
            <div class="logo-container">
                <div class="golden-ring"></div>
                <div class="logo-wrapper">
                    <img src="logu.png" alt="Logo" class="luxury-logo">
                </div>
                <div class="sparkles"></div>
                <div class="soft-glow"></div>
                <div class="light"></div>
                <div class="particles"></div>
            </div>
            <h1 class="brand-name">
                <div class="logo-container">
                    <h1 class="animated-logo">
                        <span>S</span>
                        <span>E</span>
                        <span>L</span>
                        <span>B</span>
                        <span>Y</span>
                        <span>M</span>
                        <span>E</span>
                    </h1>
                </div>
            </h1>
        </div>
        <nav class="nav-options">
   
  <a href="your cart.html">
      <img src="your cart.png" alt="your cart"style="width: 20px;">  </a>
    </nav>
        <nav class="nav-options">
            <button id="hamburger-btn" class="hamburger-btn">
                &#9776; <!-- Hamburger Icon -->
            </button>
        </nav>
    </header>
    <!-- Side Menu (Initially Hidden) -->
    <div id="side-menu" class="side-menu">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="allhomeproducts.html">Buy For Home</a></li>
            <li><a href="allshopproducts.html">Buy For Shop</a></li>
            <li><a href="orderhistory.html">Order History</a></li>
            <li><a href="your cart.html">Your Cart</a></li>
            <li><a href="selbyme gallery.html">Selbyme Gallery</a></li>
            
        </ul>
    </div>
    <section class="features-section" id="features">
    <ul>
      <li>
   
         <div id="order-summary" class="order-summary"></div>
         
         <section class="hero">
        <div class="hero-text">
          
    <butons onclick="redirectToWhatsApp()">Online Order</butons>
    
     <butons onclick="sendSMS()">Offline Order</butons>
     </div>
     </section>
     
       </li>
     </ul>
    </section>
         
    <!-- Footer -->
    <footer class="footer">
      <div class="footer-info">
            <div>
                <h3>Contact Us</h3>
                 <a href="mailto:selbyme@gmail.com"style="color: white;">support@selbyme.com</a>
                
            </div>
            <div>
              <div>
                <h3>About Us</h3>
                <p>SELBYME is your one-stop destination for all your shopping needs.</p>
            </div>
        </div>
        <p><strong>&copy; 2025</strong> SELBYME. All rights reserved.</p>
        <nav>
            <a href="privacypolicy.html" style="color: white;">Privacy Policy</a>
            <a href="t&c.html"style="color: white;">T&C</a>
            <a href="index.html"style="color: white;">Home</a>
           
        </nav>
        </div>
    </footer>
    <script src="app.js" defer></script>
    
</body>
        </html>
